<!DOCTYPE html><!--3ddzafj3y1iV8DPtiYwP4--><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/cracking-interview/_next/static/media/569ce4b8f30dc480-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/cracking-interview/_next/static/media/93f479601ee12b01-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" as="image" href="/assets/img/design/movie-booking/use-case.svg"/><link rel="preload" as="image" href="/assets/img/design/movie-booking/class-diagram.png"/><link rel="preload" as="image" href="/assets/img/design/concepts/uml.svg"/><link rel="preload" as="image" href="/assets/img/design/movie-booking/activity-book.svg"/><link rel="preload" as="image" href="/assets/img/design/movie-booking/activity-cancel.svg"/><link rel="stylesheet" href="/cracking-interview/_next/static/css/ff78c3bf1dd6c987.css" data-precedence="next"/><link rel="stylesheet" href="/cracking-interview/_next/static/css/34937f2da1ffdcf9.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/cracking-interview/_next/static/chunks/webpack-dc8592505c0fbdf6.js"/><script src="/cracking-interview/_next/static/chunks/b76c154f-a60812fa0c7d61dc.js" async=""></script><script src="/cracking-interview/_next/static/chunks/1424-6280bc73105ec745.js" async=""></script><script src="/cracking-interview/_next/static/chunks/main-app-7cddbb46aa1f0e9e.js" async=""></script><script src="/cracking-interview/_next/static/chunks/b321d78c-7a062717568e9902.js" async=""></script><script src="/cracking-interview/_next/static/chunks/26d1fef7-ee766bdebc2771f4.js" async=""></script><script src="/cracking-interview/_next/static/chunks/6334-d195304efa533649.js" async=""></script><script src="/cracking-interview/_next/static/chunks/1959-5ce2d9e80376f08d.js" async=""></script><script src="/cracking-interview/_next/static/chunks/app/layout-25227c6113fa4794.js" async=""></script><script src="/cracking-interview/_next/static/chunks/5982-8f18ab36ced88977.js" async=""></script><script src="/cracking-interview/_next/static/chunks/app/system-design/%5Bslug%5D/page-2e21c7ce311ec90f.js" async=""></script><meta name="next-size-adjust" content=""/><title>Cracking the Interview</title><meta name="description" content="Master coding interviews with comprehensive practice problems, system design, and behavioral questions"/><script src="/cracking-interview/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="__variable_68ab41 __variable_8cef05 antialiased"><div hidden=""><!--$--><!--/$--></div><div class="min-h-screen bg-gray-50 dark:bg-gray-900"><div class="container mx-auto px-4 py-8"><div class="mb-8"><a class="text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300" href="/cracking-interview/system-design/">← Back to System Design</a></div><div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm"><div class="p-6 border-b border-gray-200 dark:border-gray-700"><h1 class="text-3xl font-bold text-gray-900 dark:text-white">Movie Booking</h1></div><div class="p-6"><div class="prose prose-lg dark:prose-invert max-w-none"><hr/>
<h2>title: &quot;Design a Movie Ticket Booking System&quot;
author: &quot;Rajat Srivastava&quot;
categories: system-designs
tags: [system-design, hld, lld]
description: &quot;System design concepts and patterns&quot;</h2>
<p>An online movie ticket booking system facilitates the purchasing of movie tickets to its customers. E-ticketing systems allow customers to browse through movies currently playing and book seats, anywhere and anytime.</p>
<hr/>
<h2>System Requirements</h2>
<p>Our ticket booking service should meet the following requirements:</p>
<ol>
<li>It should be able to list the cities where affiliate cinemas are located.</li>
<li>Each cinema can have multiple halls and each hall can run one movie show at a time.</li>
<li>Each Movie will have multiple shows.</li>
<li>Customers should be able to search movies by their title, language, genre, release date, and city name.</li>
<li>Once the customer selects a movie, the service should display the cinemas running that movie and its available shows.</li>
<li>The customer should be able to select a show at a particular cinema and book their tickets.</li>
<li>The service should show the customer the seating arrangement of the cinema hall. The customer should be able to select multiple seats according to their preference.</li>
<li>The customer should be able to distinguish between available seats and booked ones.</li>
<li>The system should send notifications whenever there is a new movie, as well as when a booking is made or canceled.</li>
<li>Customers of our system should be able to pay with credit cards or cash.</li>
<li>The system should ensure that no two customers can reserve the same seat.</li>
<li>Customers should be able to add a discount coupon to their payment.</li>
</ol>
<hr/>
<h2>Use Case Diagrams</h2>
<p>We have five main Actors in our system:</p>
<ul>
<li><strong>Admin:</strong> Responsible for adding new movies and their shows, canceling any movie or show, blocking/unblocking customers, etc.</li>
<li><strong>FrontDeskOfficer:</strong> Can book/cancel tickets.</li>
<li><strong>Customer:</strong> Can view movie schedules, book, and cancel tickets.</li>
<li><strong>Guest:</strong> All guests can search movies but to book seats they have to become a registered member.</li>
<li><strong>System:</strong> Mainly responsible for sending notifications for new movies, bookings, cancellations, etc.</li>
</ul>
<p>Here are the top use cases of the Movie Ticket Booking System:</p>
<ul>
<li><strong>Search movies:</strong> To search movies by title, genre, language, release date, and city name.</li>
<li><strong>Create/Modify/View booking:</strong> To book a movie show ticket, cancel it or view details about the show.</li>
<li><strong>Make payment for booking:</strong> To pay for the booking.</li>
<li><strong>Add a coupon to the payment:</strong> To add a discount coupon to the payment.</li>
<li><strong>Assign Seat:</strong> Customers will be shown a seat map to let them select seats for their booking.</li>
<li><strong>Refund payment:</strong> Upon cancellation, customers will be refunded the payment amount as long as the cancellation occurs within the allowed time frame.</li>
</ul>
<figure class="my-8"><div class="relative"><div class="absolute inset-0 flex items-center justify-center bg-muted/20 rounded-lg"><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-primary"></div></div><img src="/assets/img/design/movie-booking/use-case.svg" alt="Usecase Diagram for Movie Booking System" class="max-w-full h-auto rounded-lg border border-border shadow-sm mx-auto"/></div></figure>
<hr/>
<h2>Class Diagrams</h2>
<p>Here are the main classes of the Movie Ticket Booking System:</p>
<ul>
<li><strong>Account:</strong> Admin will be able to add/remove movies and shows, as well as block/unblock accounts. Customers can search for movies and make bookings for shows. FrontDeskOffice can book tickets for movie shows</li>
<li><strong>Guest:</strong> Guests can search and view movies descriptions. To make a booking for a show they have to become a registered member.</li>
<li><strong>Cinema:</strong> The main part of the organization for which this software has been designed. It has attributes like ‘name’ to distinguish it from other cinemas.</li>
<li><strong>CinemaHall:</strong> Each cinema will have multiple halls containing multiple seats.</li>
<li><strong>City:</strong> Each city can have multiple cinemas.</li>
<li><strong>Movie:</strong> The main entity of the system. Movies have attributes like title, description, language, genre, release date, city name, etc.</li>
<li><strong>Show:</strong> Each movie can have many shows; each show will be played in a cinema hall.</li>
<li><strong>CinemaHallSeat:</strong> Each cinema hall will have many seats.</li>
<li><strong>ShowSeat:</strong> Each ShowSeat will correspond to a movie Show and a CinemaHallSeat. Customers will make a booking against a ShowSeat.</li>
<li><strong>Booking:</strong> A booking is against a movie show and has attributes like a unique booking number, number of seats, and status.</li>
<li><strong>Payment:</strong> Responsible for collecting payments from customers.</li>
<li><strong>Notification:</strong> Will take care of sending notifications to customers.</li>
</ul>
<figure class="my-8"><div class="relative"><div class="absolute inset-0 flex items-center justify-center bg-muted/20 rounded-lg"><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-primary"></div></div><img src="/assets/img/design/movie-booking/class-diagram.png" alt="Class Diagram for Movie Booking System" class="max-w-full h-auto rounded-lg border border-border shadow-sm mx-auto"/></div></figure>
<figure class="my-8"><div class="relative"><div class="absolute inset-0 flex items-center justify-center bg-muted/20 rounded-lg"><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-primary"></div></div><img src="/assets/img/design/concepts/uml.svg" alt="Uml" class="max-w-full h-auto rounded-lg border border-border shadow-sm mx-auto"/></div></figure>
<hr/>
<h2>Activity Diagram</h2>
<p><strong>Make a booking:</strong> Any customer can perform this activity. Here are the steps to book a ticket for a show:</p>
<figure class="my-8"><div class="relative"><div class="absolute inset-0 flex items-center justify-center bg-muted/20 rounded-lg"><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-primary"></div></div><img src="/assets/img/design/movie-booking/activity-book.svg" alt="Activity Diagram for Movie Booking System" class="max-w-full h-auto rounded-lg border border-border shadow-sm mx-auto"/></div></figure>
<p><strong>Cancel a booking:</strong> Customer can cancel their bookings. Here are the steps to cancel a booking:</p>
<figure class="my-8"><div class="relative"><div class="absolute inset-0 flex items-center justify-center bg-muted/20 rounded-lg"><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-primary"></div></div><img src="/assets/img/design/movie-booking/activity-cancel.svg" alt="Activity Diagram for Movie Booking System" class="max-w-full h-auto rounded-lg border border-border shadow-sm mx-auto"/></div></figure>
<hr/>
<h2>Code</h2>
<p>Here is the high-level definition for the classes described above.</p>
<ul>
<li><strong>Enums and Constants:</strong> Here are the required enums, data types, and constants:</li>
</ul>
<div class="my-6 p-6 border border-gray-200 dark:border-gray-700 rounded-lg bg-gray-50 dark:bg-gray-800"><div class="flex items-center space-x-2"><div class="animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"></div><span class="text-sm text-gray-600 dark:text-gray-400">Loading code examples...</span></div></div>
<ul>
<li><strong>Account, Customer, Admin, FrontDeskOfficer, and Guest:</strong> These classes represent the different people that interact with our system:</li>
</ul>
<div class="my-6 p-6 border border-gray-200 dark:border-gray-700 rounded-lg bg-gray-50 dark:bg-gray-800"><div class="flex items-center space-x-2"><div class="animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"></div><span class="text-sm text-gray-600 dark:text-gray-400">Loading code examples...</span></div></div>
<ul>
<li><strong>Show and Movie:</strong>  A movie will have many shows:</li>
</ul>
<div class="my-6 p-6 border border-gray-200 dark:border-gray-700 rounded-lg bg-gray-50 dark:bg-gray-800"><div class="flex items-center space-x-2"><div class="animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"></div><span class="text-sm text-gray-600 dark:text-gray-400">Loading code examples...</span></div></div>
<ul>
<li><strong>Booking, ShowSeat, and Payment:</strong> Customers will reserve seats with a booking and make a payment:</li>
</ul>
<div class="my-6 p-6 border border-gray-200 dark:border-gray-700 rounded-lg bg-gray-50 dark:bg-gray-800"><div class="flex items-center space-x-2"><div class="animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"></div><span class="text-sm text-gray-600 dark:text-gray-400">Loading code examples...</span></div></div>
<ul>
<li><strong>City, Cinema, and CinemaHall:</strong> Each city can have many cinemas and each cinema can have many cinema halls:</li>
</ul>
<div class="my-6 p-6 border border-gray-200 dark:border-gray-700 rounded-lg bg-gray-50 dark:bg-gray-800"><div class="flex items-center space-x-2"><div class="animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"></div><span class="text-sm text-gray-600 dark:text-gray-400">Loading code examples...</span></div></div>
<ul>
<li><strong>Search interface and Catalog:</strong> Catalog will implement Search to facilitate searching of products.</li>
</ul>
<div class="my-6 p-6 border border-gray-200 dark:border-gray-700 rounded-lg bg-gray-50 dark:bg-gray-800"><div class="flex items-center space-x-2"><div class="animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"></div><span class="text-sm text-gray-600 dark:text-gray-400">Loading code examples...</span></div></div>
<hr/>
<h2>Concurrency</h2>
<p><strong>How to handle concurrency; such that no two users are able to book the same seat?</strong>
We can use transactions in SQL databases to avoid any clashes. For example, if we are using SQL server we can utilize Transaction Isolation Levels to lock the rows before we update them. Note: within a transaction, if we read rows we get a write-lock on them so that they can’t be updated by anyone else. Here is the sample code:</p>
<div class="my-6 p-6 border border-gray-200 dark:border-gray-700 rounded-lg bg-gray-50 dark:bg-gray-800"><div class="flex items-center space-x-2"><div class="animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"></div><span class="text-sm text-gray-600 dark:text-gray-400">Loading code examples...</span></div></div>
<p>&#x27;Serializable&#x27; is the highest isolation level and guarantees safety from <a href="https://en.wikipedia.org/wiki/Isolation_(database_systems)#Dirty_reads" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-1 text-primary hover:text-primary/80 underline underline-offset-2 transition-colors ">Dirty Reads<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-external-link h-3 w-3" aria-hidden="true"><path d="M15 3h6v6"></path><path d="M10 14 21 3"></path><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path></svg></a>, <a href="https://en.wikipedia.org/wiki/Isolation_(database_systems)#Non-repeatable_reads" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-1 text-primary hover:text-primary/80 underline underline-offset-2 transition-colors ">Nonrepeatable<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-external-link h-3 w-3" aria-hidden="true"><path d="M15 3h6v6"></path><path d="M10 14 21 3"></path><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path></svg></a>, and <a href="https://en.wikipedia.org/wiki/Isolation_(database_systems)#Phantom_reads" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-1 text-primary hover:text-primary/80 underline underline-offset-2 transition-colors ">Phantoms reads<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-external-link h-3 w-3" aria-hidden="true"><path d="M15 3h6v6"></path><path d="M10 14 21 3"></path><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path></svg></a>.</p>
<p>Once the above database transaction is successful, we can safely assume that the reservation has been marked successfully and no two customers will be able to reserve the same seat.</p>
<p>Here is the sample Java code:</p>
<div class="my-6 p-6 border border-gray-200 dark:border-gray-700 rounded-lg bg-gray-50 dark:bg-gray-800"><div class="flex items-center space-x-2"><div class="animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"></div><span class="text-sm text-gray-600 dark:text-gray-400">Loading code examples...</span></div></div></div></div></div></div></div><!--$--><!--/$--><script src="/cracking-interview/_next/static/chunks/webpack-dc8592505c0fbdf6.js" id="_R_" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[10961,[\"8609\",\"static/chunks/b321d78c-7a062717568e9902.js\",\"9696\",\"static/chunks/26d1fef7-ee766bdebc2771f4.js\",\"6334\",\"static/chunks/6334-d195304efa533649.js\",\"1959\",\"static/chunks/1959-5ce2d9e80376f08d.js\",\"7177\",\"static/chunks/app/layout-25227c6113fa4794.js\"],\"ThemeProvider\"]\n3:I[37752,[\"8609\",\"static/chunks/b321d78c-7a062717568e9902.js\",\"9696\",\"static/chunks/26d1fef7-ee766bdebc2771f4.js\",\"6334\",\"static/chunks/6334-d195304efa533649.js\",\"1959\",\"static/chunks/1959-5ce2d9e80376f08d.js\",\"7177\",\"static/chunks/app/layout-25227c6113fa4794.js\"],\"AuthProvider\"]\n4:I[37462,[\"8609\",\"static/chunks/b321d78c-7a062717568e9902.js\",\"9696\",\"static/chunks/26d1fef7-ee766bdebc2771f4.js\",\"6334\",\"static/chunks/6334-d195304efa533649.js\",\"1959\",\"static/chunks/1959-5ce2d9e80376f08d.js\",\"7177\",\"static/chunks/app/layout-25227c6113fa4794.js\"],\"default\"]\n5:I[95079,[],\"\"]\n6:I[81019,[],\"\"]\n8:I[96590,[],\"OutletBoundary\"]\na:I[47875,[],\"AsyncMetadataOutlet\"]\nc:I[96590,[],\"ViewportBoundary\"]\ne:I[96590,[],\"MetadataBoundary\"]\nf:\"$Sreact.suspense\"\n11:I[69741,[],\"\"]\n:HL[\"/cracking-interview/_next/static/media/569ce4b8f30dc480-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/cracking-interview/_next/static/media/93f479601ee12b01-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/cracking-interview/_next/static/css/ff78c3bf1dd6c987.css\",\"style\"]\n:HL[\"/cracking-interview/_next/static/css/34937f2da1ffdcf9.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"3ddzafj3y1iV8DPtiYwP4\",\"p\":\"/cracking-interview\",\"c\":[\"\",\"system-design\",\"movie-booking\",\"\"],\"i\":false,\"f\":[[[\"\",{\"children\":[\"system-design\",{\"children\":[[\"slug\",\"movie-booking\",\"d\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/cracking-interview/_next/static/css/ff78c3bf1dd6c987.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/cracking-interview/_next/static/css/34937f2da1ffdcf9.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"body\",null,{\"className\":\"__variable_68ab41 __variable_8cef05 antialiased\",\"children\":[\"$\",\"$L2\",null,{\"children\":[\"$\",\"$L3\",null,{\"children\":[[\"$\",\"$L4\",null,{}],[\"$\",\"$L5\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L6\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}]}]}]}]]}],{\"children\":[\"system-design\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L5\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L6\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"slug\",\"movie-booking\",\"d\"],[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L5\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L6\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$1\",\"c\",{\"children\":[\"$L7\",null,[\"$\",\"$L8\",null,{\"children\":[\"$L9\",[\"$\",\"$La\",null,{\"promise\":\"$@b\"}]]}]]}],{},null,false]},null,false]},null,false]},null,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[[\"$\",\"$Lc\",null,{\"children\":\"$Ld\"}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]],[\"$\",\"$Le\",null,{\"children\":[\"$\",\"div\",null,{\"hidden\":true,\"children\":[\"$\",\"$f\",null,{\"fallback\":null,\"children\":\"$L10\"}]}]}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$11\",[]],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"d:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n9:null\n"])</script><script>self.__next_f.push([1,"b:{\"metadata\":[[\"$\",\"title\",\"0\",{\"children\":\"Cracking the Interview\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"Master coding interviews with comprehensive practice problems, system design, and behavioral questions\"}]],\"error\":null,\"digest\":\"$undefined\"}\n"])</script><script>self.__next_f.push([1,"10:\"$b:metadata\"\n"])</script><script>self.__next_f.push([1,"12:I[36334,[\"6334\",\"static/chunks/6334-d195304efa533649.js\",\"5982\",\"static/chunks/5982-8f18ab36ced88977.js\",\"17\",\"static/chunks/app/system-design/%5Bslug%5D/page-2e21c7ce311ec90f.js\"],\"\"]\n"])</script><script>self.__next_f.push([1,"7:[\"$\",\"div\",null,{\"className\":\"min-h-screen bg-gray-50 dark:bg-gray-900\",\"children\":[\"$\",\"div\",null,{\"className\":\"container mx-auto px-4 py-8\",\"children\":[[\"$\",\"div\",null,{\"className\":\"mb-8\",\"children\":[\"$\",\"$L12\",null,{\"href\":\"/system-design\",\"className\":\"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300\",\"children\":\"← Back to System Design\"}]}],[\"$\",\"div\",null,{\"className\":\"bg-white dark:bg-gray-800 rounded-lg shadow-sm\",\"children\":[[\"$\",\"div\",null,{\"className\":\"p-6 border-b border-gray-200 dark:border-gray-700\",\"children\":[\"$\",\"h1\",null,{\"className\":\"text-3xl font-bold text-gray-900 dark:text-white\",\"children\":\"Movie Booking\"}]}],[\"$\",\"div\",null,{\"className\":\"p-6\",\"children\":[\"$\",\"div\",null,{\"className\":\"prose prose-lg dark:prose-invert max-w-none\",\"children\":\"$L13\"}]}]]}]]}]}]\n"])</script><script>self.__next_f.push([1,"13:[[\"$\",\"hr\",null,{}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"title: \\\"Design a Movie Ticket Booking System\\\"\\nauthor: \\\"Rajat Srivastava\\\"\\ncategories: system-designs\\ntags: [system-design, hld, lld]\\ndescription: \\\"System design concepts and patterns\\\"\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"An online movie ticket booking system facilitates the purchasing of movie tickets to its customers. E-ticketing systems allow customers to browse through movies currently playing and book seats, anywhere and anytime.\"}],\"\\n\",[\"$\",\"hr\",null,{}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"System Requirements\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Our ticket booking service should meet the following requirements:\"}],\"\\n\",[\"$\",\"ol\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"It should be able to list the cities where affiliate cinemas are located.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Each cinema can have multiple halls and each hall can run one movie show at a time.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Each Movie will have multiple shows.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Customers should be able to search movies by their title, language, genre, release date, and city name.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Once the customer selects a movie, the service should display the cinemas running that movie and its available shows.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"The customer should be able to select a show at a particular cinema and book their tickets.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"The service should show the customer the seating arrangement of the cinema hall. The customer should be able to select multiple seats according to their preference.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"The customer should be able to distinguish between available seats and booked ones.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"The system should send notifications whenever there is a new movie, as well as when a booking is made or canceled.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Customers of our system should be able to pay with credit cards or cash.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"The system should ensure that no two customers can reserve the same seat.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Customers should be able to add a discount coupon to their payment.\"}],\"\\n\"]}],\"\\n\",[\"$\",\"hr\",null,{}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Use Case Diagrams\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"We have five main Actors in our system:\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Admin:\"}],\" Responsible for adding new movies and their shows, canceling any movie or show, blocking/unblocking customers, etc.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"FrontDeskOfficer:\"}],\" Can book/cancel tickets.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Customer:\"}],\" Can view movie schedules, book, and cancel tickets.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Guest:\"}],\" All guests can search movies but to book seats they have to become a registered member.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"System:\"}],\" Mainly responsible for sending notifications for new movies, bookings, cancellations, etc.\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Here are the top use cases of the Movie Ticket Booking System:\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Search movies:\"}],\" To search movies by title, genre, language, release date, and city name.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Create/Modify/View booking:\"}],\" To book a movie show ticket, cancel it or view details about the show.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Make payment for booking:\"}],\" To pay for the booking.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Add a coupon to the payment:\"}],\" To add a discount coupon to the payment.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Assign Seat:\"}],\" Customers will be shown a seat map to let them select seats for their booking.\"]}],\"\\n\",\"$L14\",\"\\n\"]}],\"\\n\",\"$L15\",\"\\n\",\"$L16\",\"\\n\",\"$L17\",\"\\n\",\"$L18\",\"\\n\",\"$L19\",\"\\n\",\"$L1a\",\"\\n\",\"$L1b\",\"\\n\",\"$L1c\",\"\\n\",\"$L1d\",\"\\n\",\"$L1e\",\"\\n\",\"$L1f\",\"\\n\",\"$L20\",\"\\n\",\"$L21\",\"\\n\",\"$L22\",\"\\n\",\"$L23\",\"\\n\",\"$L24\",\"\\n\",\"$L25\",\"\\n\",\"$L26\",\"\\n\",\"$L27\",\"\\n\",\"$L28\",\"\\n\",\"$L29\",\"\\n\",\"$L2a\",\"\\n\",\"$L2b\",\"\\n\",\"$L2c\",\"\\n\",\"$L2d\",\"\\n\",\"$L2e\",\"\\n\",\"$L2f\",\"\\n\",\"$L30\",\"\\n\",\"$L31\",\"\\n\",\"$L32\",\"\\n\",\"$L33\",\"\\n\",\"$L34\",\"\\n\",\"$L35\",\"\\n\",\"$L36\",\"\\n\",\"$L37\",\"\\n\",\"$L38\"]\n"])</script><script>self.__next_f.push([1,"39:I[48693,[\"6334\",\"static/chunks/6334-d195304efa533649.js\",\"5982\",\"static/chunks/5982-8f18ab36ced88977.js\",\"17\",\"static/chunks/app/system-design/%5Bslug%5D/page-2e21c7ce311ec90f.js\"],\"MdxImage\"]\n3a:I[11141,[\"6334\",\"static/chunks/6334-d195304efa533649.js\",\"5982\",\"static/chunks/5982-8f18ab36ced88977.js\",\"17\",\"static/chunks/app/system-design/%5Bslug%5D/page-2e21c7ce311ec90f.js\"],\"MdxCodeTabs\"]\n14:[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Refund payment:\"}],\" Upon cancellation, customers will be refunded the payment amount as long as the cancellation occurs within the allowed time frame.\"]}]\n15:[\"$\",\"$L39\",null,{\"src\":\"design/movie-booking/use-case.svg\",\"alt\":\"Usecase Diagram for Movie Booking System\"}]\n16:[\"$\",\"hr\",null,{}]\n17:[\"$\",\"h2\",null,{\"children\":\"Class Diagrams\"}]\n18:[\"$\",\"p\",null,{\"children\":\"Here are the main classes of the Movie Ticket Booking System:\"}]\n"])</script><script>self.__next_f.push([1,"19:[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Account:\"}],\" Admin will be able to add/remove movies and shows, as well as block/unblock accounts. Customers can search for movies and make bookings for shows. FrontDeskOffice can book tickets for movie shows\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Guest:\"}],\" Guests can search and view movies descriptions. To make a booking for a show they have to become a registered member.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Cinema:\"}],\" The main part of the organization for which this software has been designed. It has attributes like ‘name’ to distinguish it from other cinemas.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"CinemaHall:\"}],\" Each cinema will have multiple halls containing multiple seats.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"City:\"}],\" Each city can have multiple cinemas.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Movie:\"}],\" The main entity of the system. Movies have attributes like title, description, language, genre, release date, city name, etc.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Show:\"}],\" Each movie can have many shows; each show will be played in a cinema hall.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"CinemaHallSeat:\"}],\" Each cinema hall will have many seats.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"ShowSeat:\"}],\" Each ShowSeat will correspond to a movie Show and a CinemaHallSeat. Customers will make a booking against a ShowSeat.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Booking:\"}],\" A booking is against a movie show and has attributes like a unique booking number, number of seats, and status.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Payment:\"}],\" Responsible for collecting payments from customers.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Notification:\"}],\" Will take care of sending notifications to customers.\"]}],\"\\n\"]}]\n"])</script><script>self.__next_f.push([1,"1a:[\"$\",\"$L39\",null,{\"src\":\"design/movie-booking/class-diagram.png\",\"alt\":\"Class Diagram for Movie Booking System\"}]\n1b:[\"$\",\"$L39\",null,{\"src\":\"design/concepts/uml.svg\",\"alt\":\"Uml\"}]\n1c:[\"$\",\"hr\",null,{}]\n1d:[\"$\",\"h2\",null,{\"children\":\"Activity Diagram\"}]\n1e:[\"$\",\"p\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Make a booking:\"}],\" Any customer can perform this activity. Here are the steps to book a ticket for a show:\"]}]\n1f:[\"$\",\"$L39\",null,{\"src\":\"design/movie-booking/activity-book.svg\",\"alt\":\"Activity Diagram for Movie Booking System\"}]\n20:[\"$\",\"p\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Cancel a booking:\"}],\" Customer can cancel their bookings. Here are the steps to cancel a booking:\"]}]\n21:[\"$\",\"$L39\",null,{\"src\":\"design/movie-booking/activity-cancel.svg\",\"alt\":\"Activity Diagram for Movie Booking System\"}]\n22:[\"$\",\"hr\",null,{}]\n23:[\"$\",\"h2\",null,{\"children\":\"Code\"}]\n24:[\"$\",\"p\",null,{\"children\":\"Here is the high-level definition for the classes described above.\"}]\n25:[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Enums and Constants:\"}],\" Here are the required enums, data types, and constants:\"]}],\"\\n\"]}]\n26:[\"$\",\"$L3a\",null,{\"langs\":[\"java\",\"py\"],\"path\":\"system-design/code/movie-booking/enums\"}]\n27:[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Account, Customer, Admin, FrontDeskOfficer, and Guest:\"}],\" These classes represent the different people that interact with our system:\"]}],\"\\n\"]}]\n28:[\"$\",\"$L3a\",null,{\"langs\":[\"java\",\"py\"],\"path\":\"system-design/code/movie-booking/accounts\"}]\n29:[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Show and Movie:\"}],\"  A movie will have many shows:\"]}],\"\\n\"]}]\n2a:[\"$\",\"$L3a\",null,{\"langs\":[\"java\",\"py\"],\"path\":\"system-design/code/movie-booking/show\"}]\n2b:[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Booking, ShowSeat, and Payment:\"}],\" Customers will reserve seats with a book"])</script><script>self.__next_f.push([1,"ing and make a payment:\"]}],\"\\n\"]}]\n2c:[\"$\",\"$L3a\",null,{\"langs\":[\"java\",\"py\"],\"path\":\"system-design/code/movie-booking/booking\"}]\n2d:[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"City, Cinema, and CinemaHall:\"}],\" Each city can have many cinemas and each cinema can have many cinema halls:\"]}],\"\\n\"]}]\n2e:[\"$\",\"$L3a\",null,{\"langs\":[\"java\",\"py\"],\"path\":\"system-design/code/movie-booking/cinema\"}]\n2f:[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Search interface and Catalog:\"}],\" Catalog will implement Search to facilitate searching of products.\"]}],\"\\n\"]}]\n30:[\"$\",\"$L3a\",null,{\"langs\":[\"java\",\"py\"],\"path\":\"system-design/code/movie-booking/search\"}]\n31:[\"$\",\"hr\",null,{}]\n32:[\"$\",\"h2\",null,{\"children\":\"Concurrency\"}]\n33:[\"$\",\"p\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"How to handle concurrency; such that no two users are able to book the same seat?\"}],\"\\nWe can use transactions in SQL databases to avoid any clashes. For example, if we are using SQL server we can utilize Transaction Isolation Levels to lock the rows before we update them. Note: within a transaction, if we read rows we get a write-lock on them so that they can’t be updated by anyone else. Here is the sample code:\"]}]\n34:[\"$\",\"$L3a\",null,{\"langs\":[\"sql\"],\"path\":\"system-design/code/movie-booking/concurrency\"}]\n"])</script><script>self.__next_f.push([1,"35:[\"$\",\"p\",null,{\"children\":[\"'Serializable' is the highest isolation level and guarantees safety from \",[\"$\",\"a\",null,{\"href\":\"https://en.wikipedia.org/wiki/Isolation_(database_systems)#Dirty_reads\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"className\":\"inline-flex items-center gap-1 text-primary hover:text-primary/80 underline underline-offset-2 transition-colors \",\"children\":[\"Dirty Reads\",[\"$\",\"svg\",null,{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":24,\"height\":24,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide lucide-external-link h-3 w-3\",\"aria-hidden\":\"true\",\"children\":[[\"$\",\"path\",\"1q9fwt\",{\"d\":\"M15 3h6v6\"}],[\"$\",\"path\",\"gplh6r\",{\"d\":\"M10 14 21 3\"}],[\"$\",\"path\",\"a6xqqp\",{\"d\":\"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6\"}],\"$undefined\"]}]]}],\", \",[\"$\",\"a\",null,{\"href\":\"https://en.wikipedia.org/wiki/Isolation_(database_systems)#Non-repeatable_reads\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"className\":\"inline-flex items-center gap-1 text-primary hover:text-primary/80 underline underline-offset-2 transition-colors \",\"children\":[\"Nonrepeatable\",[\"$\",\"svg\",null,{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":24,\"height\":24,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide lucide-external-link h-3 w-3\",\"aria-hidden\":\"true\",\"children\":[[\"$\",\"path\",\"1q9fwt\",{\"d\":\"M15 3h6v6\"}],[\"$\",\"path\",\"gplh6r\",{\"d\":\"M10 14 21 3\"}],[\"$\",\"path\",\"a6xqqp\",{\"d\":\"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6\"}],\"$undefined\"]}]]}],\", and \",[\"$\",\"a\",null,{\"href\":\"https://en.wikipedia.org/wiki/Isolation_(database_systems)#Phantom_reads\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"className\":\"inline-flex items-center gap-1 text-primary hover:text-primary/80 underline underline-offset-2 transition-colors \",\"children\":[\"Phantoms reads\",[\"$\",\"svg\",null,{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":24,\"height\":24,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide lucide-external-link h-3 w-3\",\"aria-hidden\":\"true\",\"children\":[[\"$\",\"path\",\"1q9fwt\",{\"d\":\"M15 3h6v6\"}],[\"$\",\"path\",\"gplh6r\",{\"d\":\"M10 14 21 3\"}],[\"$\",\"path\",\"a6xqqp\",{\"d\":\"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6\"}],\"$undefined\"]}]]}],\".\"]}]\n"])</script><script>self.__next_f.push([1,"36:[\"$\",\"p\",null,{\"children\":\"Once the above database transaction is successful, we can safely assume that the reservation has been marked successfully and no two customers will be able to reserve the same seat.\"}]\n37:[\"$\",\"p\",null,{\"children\":\"Here is the sample Java code:\"}]\n38:[\"$\",\"$L3a\",null,{\"langs\":[\"java\"],\"path\":\"system-design/code/movie-booking/concurrency\"}]\n"])</script></body></html>