(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6636],{2783:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(76846).A)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]])},14912:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(76846).A)("bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]])},32067:(e,t,s)=>{"use strict";var r=s(2827);s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}})},44749:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>y});var r=s(10228),a=s(63896),i=s(37752),o=s(32067),l=s(69949),n=s(80368),c=s(82490),d=s(36334),m=s.n(d);let u=(0,s(76846).A)("circle-user",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);var h=s(2783),x=s(49934),p=s(14912),b=s(70050),f=s(79741);let y=()=>{let{user:e,signOut:t}=(0,i.A)(),s=(0,o.useRouter)(),[d,y]=(0,a.useState)([]),[g,k]=(0,a.useState)([]),[v,N]=(0,a.useState)(!0),[j,_]=(0,a.useState)("bookmarks");(0,a.useEffect)(()=>{if(!e)return void s.push("/auth");w()},[e,s]);let w=(0,a.useCallback)(async()=>{if(e)try{let[t,s,r]=await Promise.all([(0,l.Nu)("dsa"),(0,l.Nu)("system-design"),(0,l.Nu)("behavioral")]),a=[],i=[];for(let{id:o,topics:l}of[{id:"dsa",topics:t},{id:"system-design",topics:s},{id:"behavioral",topics:r}]){let t=(0,n.Sp)(e.uid,o);0===Object.keys(t).length&&(t=await (0,n.C$)(e.uid,o));let s=Object.entries(t).filter(e=>{let[,t]=e;return t.is_bookmarked}).map(e=>{let[t]=e;return t}),r=Object.entries(t).filter(e=>{let[,t]=e;return t.is_completed}).map(e=>{let[t]=e;return t});for(let e of l)s.includes(e.id)&&a.push({id:e.id,title:e.title,difficulty:e.difficulty,question_type:o}),r.includes(e.id)&&i.push({id:e.id,title:e.title,difficulty:e.difficulty,question_type:o})}y(a),k(i)}catch(e){console.error("Error fetching progress:",e)}finally{N(!1)}},[e]),A=async(t,s)=>{if(e)try{await (0,n.GJ)(e.uid,s,t,{isBookmarked:!1}),y(e=>e.filter(e=>e.id!==t||e.question_type!==s))}catch(e){console.error("Error removing bookmark:",e)}};return v?(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"container mx-auto px-4 py-8 text-center",children:"Loading profile..."})}):(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,r.jsxs)("div",{className:"flex flex-col md:flex-row items-center md:items-start gap-8 mb-8",children:[(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[(null==e?void 0:e.photoURL)?(0,r.jsx)("img",{src:e.photoURL,alt:"Profile",className:"w-24 h-24 rounded-full border-2 border-primary shadow-lg"}):(0,r.jsx)(u,{size:96,className:"text-primary"}),(0,r.jsx)("h1",{className:"text-2xl font-bold mt-4",children:(null==e?void 0:e.displayName)||"User"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:null==e?void 0:e.email}),(0,r.jsxs)(c.$,{variant:"ghost",onClick:t,className:"mt-4 flex items-center gap-2",children:[(0,r.jsx)(h.A,{size:16}),"Sign Out"]})]}),(0,r.jsxs)("div",{className:"flex-1 w-full",children:[(0,r.jsxs)("div",{className:"flex border-b border-border mb-6",children:[(0,r.jsxs)("button",{className:"px-4 py-2 font-medium text-sm border-b-2 transition-colors ".concat("bookmarks"===j?"border-primary text-primary bg-primary/10":"border-transparent text-muted-foreground hover:text-foreground hover:border-border"),onClick:()=>_("bookmarks"),children:["Bookmarks (",d.length,")"]}),(0,r.jsxs)("button",{className:"px-4 py-2 font-medium text-sm border-b-2 transition-colors ".concat("completed"===j?"border-primary text-primary bg-primary/10":"border-transparent text-muted-foreground hover:text-foreground hover:border-border"),onClick:()=>_("completed"),children:["Completed (",g.length,")"]})]}),(0,r.jsx)("div",{className:"grid gap-4",children:("bookmarks"===j?d:g).map(e=>(0,r.jsx)("div",{className:"p-6 bg-card rounded-lg border border-border shadow-sm",children:(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-foreground",children:e.title}),(0,r.jsx)("p",{className:"text-muted-foreground mt-2",children:e.description}),(0,r.jsxs)("div",{className:"flex items-center gap-2 mt-4",children:[(0,r.jsx)(f.A,{difficulty:e.difficulty}),(0,r.jsx)("div",{className:"badge badge-info capitalize p-2 rounded-md text-xs",children:e.question_type.replace("_"," ")})]})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)(m(),{href:(e=>{switch(e){case"dsa":return"/dsa";case"system-design":return"/system-design";case"behavioral":return"/behavioral";default:return"/"}})(e.question_type),className:"btn btn-sm btn-primary",children:[(0,r.jsx)(x.A,{size:16}),"View"]}),"bookmarks"===j&&(0,r.jsx)(c.$,{variant:"ghost",size:"sm",onClick:()=>A(e.id,e.question_type),className:"btn-sm",children:(0,r.jsx)(p.A,{size:16,className:"text-warning"})})]})]})},"".concat(e.question_type,"-").concat(e.id)))}),0===("bookmarks"===j?d:g).length&&(0,r.jsxs)("div",{className:"text-center py-12",children:["bookmarks"===j?(0,r.jsx)(p.A,{size:64,className:"mx-auto text-base-300 mb-4"}):(0,r.jsx)(b.A,{size:64,className:"mx-auto text-base-300 mb-4 text-success"}),(0,r.jsxs)("h2",{className:"text-xl mb-2",children:["No ",j," yet"]}),(0,r.jsx)("p",{className:"text-base-content/70 mb-6",children:"bookmarks"===j?"Start bookmarking questions you want to review later!":"Start completing questions to track your progress!"}),(0,r.jsxs)("div",{className:"space-x-4",children:[(0,r.jsx)(m(),{href:"/dsa",className:"btn btn-primary",children:"Browse DSA"}),(0,r.jsx)(m(),{href:"/system-design",className:"btn btn-primary",children:"Browse System Design"}),(0,r.jsx)(m(),{href:"/behavioral",className:"btn btn-primary",children:"Browse Behavioral"})]})]})]})]})})})}},49934:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(76846).A)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])},70050:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(76846).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},79741:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var r=s(10228);let a=e=>{let{difficulty:t}=e;return"all"===t?null:(0,r.jsx)("div",{className:"badge badge-dash ".concat({easy:"badge-success",medium:"badge-warning",hard:"badge-error"}[t]," p-2 rounded-md text-xs"),children:t})}},80368:(e,t,s)=>{"use strict";s.d(t,{C$:()=>m,GJ:()=>d,Pg:()=>c,Sp:()=>u});var r=s(49633),a=s(16257);function i(e,t){return"".concat("progress_cache_v1",":").concat(e,":").concat(t)}function o(e,t){try{let s=localStorage.getItem(i(e,t));return s?JSON.parse(s):{}}catch(e){return{}}}function l(e,t,s){localStorage.setItem(i(e,t),JSON.stringify(s))}function n(e,t,s,r){let a=o(e,t);a[s]=r,l(e,t,a)}async function c(e,t,s){let i=o(e,t)[s];if(i)return i;let l=(0,r.H9)(a.db,"users",e,"progress","".concat(t,":").concat(s)),c=await (0,r.x7)(l);if(!c.exists())return null;let d=c.data();return n(e,t,s,d),d}async function d(e,t,s,i){var o,l;let c=(0,r.H9)(a.db,"users",e,"progress","".concat(t,":").concat(s)),d=await (0,r.x7)(c),m={is_completed:!1,is_bookmarked:!1,updated_at:Date.now()},u={...d.exists()?d.data():m,is_completed:null!=(o=i.isCompleted)?o:d.exists()?d.data().is_completed:m.is_completed,is_bookmarked:null!=(l=i.isBookmarked)?l:d.exists()?d.data().is_bookmarked:m.is_bookmarked,updated_at:Date.now()};await (0,r.BN)(c,u),n(e,t,s,u)}async function m(e,t){let s=(0,r.rJ)(a.db,"users",e,"progress"),i=await (0,r.GG)(s),o={};return i.forEach(e=>{let s=e.id;s.startsWith("".concat(t,":"))&&(o[s.slice(t.length+1)]=e.data())}),l(e,t,o),o}function u(e,t){return o(e,t)}},97528:(e,t,s)=>{Promise.resolve().then(s.bind(s,44749))}},e=>{e.O(0,[8609,9696,3459,6334,1959,7317,9165,2175,9643,7870,2717,8423,1424,7358],()=>e(e.s=97528)),_N_E=e.O()}]);